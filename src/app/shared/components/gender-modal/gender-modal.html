<div class="gender-modal-overlay" (click)="close()">
  <div class="gender-modal" (click)="$event.stopPropagation()">
    <header class="gender-modal__header">
      <h2>Bienvenue !</h2>
      <button
        type="button"
        class="gender-modal__close"
        (click)="close()"
        aria-label="Fermer"
      >
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M6 18L18 6M6 6l12 12"
          />
        </svg>
      </button>
    </header>

    <div class="gender-modal__body">
      <p class="gender-modal__intro">
        Pour mieux vous connaître et améliorer nos services, merci de nous
        indiquer votre genre. Ces informations nous aident à analyser nos
        données de manière plus précise et à mieux comprendre notre communauté.
      </p>

      @if (errorMessage()) {
      <div class="auth-alert auth-alert--error">
        <svg class="auth-alert__icon" fill="none" viewBox="0 0 24 24">
          <path
            stroke="currentColor"
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
          />
        </svg>
        <span class="font-medium">{{ errorMessage() }}</span>
      </div>
      }

      <div class="gender-options">
        <button
          type="button"
          class="gender-option"
          [class.gender-option--active]="selectedGender() === 'HOMME'"
          (click)="selectGender('HOMME')"
        >
          <span class="gender-option__label">Homme</span>
        </button>

        <button
          type="button"
          class="gender-option"
          [class.gender-option--active]="selectedGender() === 'FEMME'"
          (click)="selectGender('FEMME')"
        >
          <span class="gender-option__label">Femme</span>
        </button>

        <button
          type="button"
          class="gender-option"
          [class.gender-option--active]="selectedGender() === 'AUTRE'"
          (click)="selectGender('AUTRE')"
        >
          <span class="gender-option__label">Autre</span>
        </button>
      </div>
    </div>

    <footer class="gender-modal__footer">
      <button
        type="button"
        class="auth-button auth-button--primary"
        [disabled]="!selectedGender() || isSubmitting()"
        (click)="onSubmit()"
      >
        @if (isSubmitting()) {
        <span class="loading loading-spinner loading-sm auth-loading"></span>
        <span>Enregistrement...</span>
        } @else {
        <span>Valider</span>
        }
      </button>
    </footer>
  </div>
</div>
